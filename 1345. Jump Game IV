class Solution:
    def minJumps(self, arr: List[int]) -> int:
        maps = defaultdict(list)
        if len(arr) == 1: return 0
        if arr[0] == arr[-1]: return 1

        for i, v in enumerate(arr):
            maps[v].append(i)

        visited = [False] * len(arr)
        visited[0] = True

        q = deque()
        q.append([0, 0]) # index, step

        while q:
            idx, ans = q.popleft()
            if idx == len(arr) - 1:
                return ans 

            if 0 <= idx + 1 < len(arr) and not visited[idx+1]:
                visited[idx+1] = True
                q.append([idx+1, ans+1])

            if 0 <= idx - 1 < len(arr) and not visited[idx-1]:
                visited[idx-1] = True
                q.append([idx-1, ans+1])

            if arr[idx] in maps:
                for j in maps[arr[idx]]:
                    if j != idx and not visited[j]:
                        visited[j] = True
                        q.append([j, ans+1])

                del maps[arr[idx]]

        return -1 



                



